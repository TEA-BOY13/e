<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
body {
  background:#020617;
  color:white;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card {
  background:#0f172a;
  padding:25px;
  width:320px;
  border-radius:10px;
  text-align:center;
}
input, button {
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:6px;
  border:none;
}
button {
  background:#22c55e;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="card">
  <h2>ðŸ›¡ Admin Login</h2>

  <input id="email" type="email" placeholder="Admin Email">
  <input id="password" type="password" placeholder="Password">

  <button id="loginBtn">Login</button>
</div>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ðŸ”¥ Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyC7krl12Xewrb3nEYzWGCEeQE0s5FgG10U",
    authDomain: "gamelive-3db71.firebaseapp.com",
    projectId: "gamelive-3db71",
    storageBucket: "gamelive-3db71.firebasestorage.app",
    messagingSenderId: "581788962069",
    appId: "1:581788962069:web:619583602ee846e17a6d1c"
  };

  // âœ… Init
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // ðŸ” Admin Login
  document.getElementById("loginBtn").addEventListener("click", async () => {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    if (!email || !password) {
      Swal.fire("Missing Fields", "Enter email and password", "warning");
      return;
    }

    try {
      const cred = await signInWithEmailAndPassword(auth, email, password);

      // ðŸ”Ž Check admin role
      const snap = await getDoc(doc(db, "users", cred.user.uid));

      if (!snap.exists() || snap.data().role !== "admin") {
        Swal.fire("Access Denied", "Admins only", "error");
        return;
      }

      Swal.fire("Welcome Admin", "Login successful", "success")
        .then(() => location.href = "adm.html");

    } catch (err) {
      Swal.fire("Login Failed", err.message, "error");
    }
  });
</script>
</body>
</html>
